import{s as n,n as t}from"./index.34e12c3e.js";const e=[];function s(n,t){return{subscribe:c(n,t).subscribe}}function c(s,c=t){let o;const r=[];function u(t){if(n(s,t)&&(s=t,o)){const n=!e.length;for(let n=0;n<r.length;n+=1){const t=r[n];t[1](),e.push(t,s)}if(n){for(let n=0;n<e.length;n+=2)e[n][0](e[n+1]);e.length=0}}}return{set:u,update:function(n){u(n(s))},subscribe:function(n,e=t){const i=[n,e];return r.push(i),1===r.length&&(o=c(u)||t),n(s),()=>{const n=r.indexOf(i);-1!==n&&r.splice(n,1),0===r.length&&(o(),o=null)}}}}export{s as r,c as w};
